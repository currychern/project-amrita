<template name="App_donations">
  <div class="container page">
    {{#if isInRole 'donor'}}
      {{#if addDonation}}
        {{> Add_donation}}
      {{else}}
        <button class="btn new-donation">New Donation</button>
        {{#each donationList}}
          {{> Donation}}
        {{/each}}
      {{/if}}
    {{else}}
      {{routeToRegistration}}
    {{/if}}
  </div>
</template>

<template name="Add_donation">
  <div class="form-add">
    <div class="close-add-donation">
      CLOSE<i class="material-icons">close</i>
    </div>
    {{> quickForm
      collection=donations
      id="insertDonationForm"
      doc=prepopulate
      type="method"
      meteormethod="donations.insert"
      buttonContent="Next"
    }}
  </div>
</template>

<template name="Donation">
  <article class="donation">
    {{#if editDonation}}
      <h3>Edit Donation</h3>
      {{> quickForm
        collection=donations
        doc=this
        id=updateDonationId
        type="method-update"
        meteormethod="donations.update"
        singleMethodArgument=true
        autosave=true
      }}
    {{else}}
      <h3>{{nickname}}</h3>
      <h4>({{type}})</h4>
      <ul>
        {{#each foods}}
          <li class="food">{{name}} - {{amount}}</li>
        {{/each}}
      </ul>
      <a href="/donation/{{_id}}">View Details</a>
    {{/if}}
    <i class="fa fa-pencil"></i>
    <i class="fa fa-trash"></i>
  </article>
</template>
